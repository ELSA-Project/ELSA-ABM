
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module simulationO</title>
<meta charset="utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>simulationO</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/home/earendil/Documents/ELSA/ABM/ABM_FINAL/abm_strategic/simulationO.py">/home/earendil/Documents/ELSA/ABM/ABM_FINAL/abm_strategic/simulationO.py</a></font></td></tr></table>
    <p><tt>Created&nbsp;on&nbsp;Mon&nbsp;Dec&nbsp;17&nbsp;14:38:09&nbsp;2012<br>
&nbsp;<br>
@author:&nbsp;gerald.gurtner<br>
&nbsp;<br>
===========================================================================<br>
This&nbsp;is&nbsp;the&nbsp;main&nbsp;interface&nbsp;to&nbsp;the&nbsp;model.&nbsp;The&nbsp;main&nbsp;functions&nbsp;are&nbsp;<br>
&nbsp;-&nbsp;do_standard,&nbsp;which&nbsp;makes&nbsp;a&nbsp;single&nbsp;iteration&nbsp;of&nbsp;the&nbsp;model,&nbsp;<br>
&nbsp;-&nbsp;generate_traffic,&nbsp;used&nbsp;by&nbsp;tactical&nbsp;model<br>
===========================================================================</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="copy.html">copy</a><br>
<a href="numpy.html">numpy</a><br>
</td><td width="25%" valign=top><a href="networkx.html">networkx</a><br>
<a href="os.html">os</a><br>
</td><td width="25%" valign=top><a href="pickle.html">pickle</a><br>
<a href="matplotlib.pyplot.html">matplotlib.pyplot</a><br>
</td><td width="25%" valign=top><a href="sys.html">sys</a><br>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="simulationO.html#Simulation">Simulation</a>
</font></dt></dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="Simulation">class <strong>Simulation</strong></a></font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>Class&nbsp;<a href="#Simulation">Simulation</a>.&nbsp;<br>
=============<br>
Main&nbsp;object&nbsp;for&nbsp;the&nbsp;simulation.&nbsp;Initialize&nbsp;loads,&nbsp;prepares&nbsp;air&nbsp;companies,&nbsp;<br>
calls&nbsp;network&nbsp;manager,&nbsp;keeps&nbsp;the&nbsp;M1&nbsp;queue&nbsp;in&nbsp;memory,&nbsp;calls&nbsp;for&nbsp;possible&nbsp;<br>
shocks.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="Simulation-__init__"><strong>__init__</strong></a>(self, paras, G<font color="#909090">=None</font>, verbose<font color="#909090">=False</font>)</dt><dd><tt>Initialize&nbsp;the&nbsp;simulation,&nbsp;build&nbsp;the&nbsp;network&nbsp;if&nbsp;none&nbsp;is&nbsp;given&nbsp;in&nbsp;argument,&nbsp;set&nbsp;the&nbsp;verbosity<br>
&nbsp;<br>
Parameters<br>
----------<br>
paras&nbsp;:&nbsp;Paras&nbsp;object,&nbsp;dict-like<br>
&nbsp;&nbsp;&nbsp;&nbsp;Gathers&nbsp;all&nbsp;parameters&nbsp;of&nbsp;the&nbsp;simulation.<br>
G&nbsp;:&nbsp;hybrid&nbsp;network<br>
&nbsp;&nbsp;&nbsp;&nbsp;compulsory,&nbsp;None&nbsp;is&nbsp;deprecated&nbsp;TODO.<br>
verbose&nbsp;:&nbsp;boolean,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;set&nbsp;verbosity.<br>
&nbsp;<br>
Notes<br>
-----<br>
Change&nbsp;in&nbsp;2.9.3:&nbsp;self.<strong>make_times</strong>&nbsp;is&nbsp;computed&nbsp;at&nbsp;each&nbsp;simulations.<br>
Changed&nbsp;in&nbsp;2.9.3:&nbsp;update&nbsp;shortest&nbsp;paths&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;change&nbsp;of&nbsp;Nsp_nav.</tt></dd></dl>

<dl><dt><a name="Simulation-build_ACs"><strong>build_ACs</strong></a>(self)</dt><dd><tt>Build&nbsp;all&nbsp;the&nbsp;Air&nbsp;Companies&nbsp;based&nbsp;on&nbsp;the&nbsp;number&nbsp;of&nbsp;Air&nbsp;Companies&nbsp;given&nbsp;in&nbsp;paras.<br>
If&nbsp;n_AC&nbsp;is&nbsp;an&nbsp;integer&nbsp;and&nbsp;if&nbsp;several&nbsp;sets&nbsp;of&nbsp;parameters&nbsp;are&nbsp;given&nbsp;for&nbsp;the&nbsp;utility&nbsp;<br>
function,&nbsp;make&nbsp;the&nbsp;same&nbsp;number&nbsp;of&nbsp;AC&nbsp;sor&nbsp;each&nbsp;set.&nbsp;If&nbsp;n_AC&nbsp;is&nbsp;an&nbsp;array&nbsp;of&nbsp;integers&nbsp;<br>
of&nbsp;the&nbsp;same&nbsp;size&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;set&nbsp;of&nbsp;parameters,&nbsp;populates&nbsp;the&nbsp;different<br>
types&nbsp;with&nbsp;this&nbsp;array.&nbsp;<br>
&nbsp;<br>
Request&nbsp;the&nbsp;computation&nbsp;of&nbsp;all&nbsp;flight&nbsp;plans&nbsp;for&nbsp;all&nbsp;ACs.<br>
&nbsp;<br>
Examples:<br>
---------<br>
self.<strong>AC</strong>=30,&nbsp;self.<strong>pars</strong>=[[1,0,0]]&nbsp;<br>
gives&nbsp;30&nbsp;ACs&nbsp;with&nbsp;parameters&nbsp;[1,0,0].<br>
&nbsp;<br>
self.<strong>AC</strong>=30,&nbsp;self.<strong>pars</strong>=[[1,0,0],&nbsp;[0,0,1]]&nbsp;<br>
gives&nbsp;15&nbsp;ACs&nbsp;with&nbsp;parameters&nbsp;[1,0,0]&nbsp;and&nbsp;15&nbsp;ACs&nbsp;with&nbsp;parameters&nbsp;[0,0,1].<br>
&nbsp;<br>
self.<strong>AC</strong>=[10,20],&nbsp;self.<strong>pars</strong>=[[1,0,0],&nbsp;[0,0,1]]&nbsp;<br>
gives&nbsp;10&nbsp;ACs&nbsp;with&nbsp;parameters&nbsp;[1,0,0]&nbsp;and&nbsp;20&nbsp;ACs&nbsp;with&nbsp;parameters&nbsp;[0,0,1].<br>
&nbsp;<br>
Raises<br>
------<br>
Exception<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.<strong>AC</strong>&nbsp;is&nbsp;a&nbsp;list&nbsp;with&nbsp;a&nbsp;different&nbsp;length&nbsp;from&nbsp;self.<strong>pars</strong><br>
&nbsp;<br>
Notes<br>
-----<br>
Changed&nbsp;in&nbsp;2.9:&nbsp;pairs&nbsp;given&nbsp;to&nbsp;ACs&nbsp;are&nbsp;navpoints,&nbsp;not&nbsp;sectors.</tt></dd></dl>

<dl><dt><a name="Simulation-build_ACs_from_flows"><strong>build_ACs_from_flows</strong></a>(self)</dt><dd><tt>Build&nbsp;the&nbsp;list&nbsp;of&nbsp;ACs&nbsp;from&nbsp;the&nbsp;flows.&nbsp;<br>
&nbsp;<br>
Notes<br>
-----<br>
New&nbsp;in&nbsp;2.9.2&nbsp;<br>
Changed&nbsp;in&nbsp;2.9.5:&nbsp;record&nbsp;the&nbsp;day&nbsp;of&nbsp;simulation.<br>
Changed&nbsp;in&nbsp;2.9.6:&nbsp;added&nbsp;bootstrap_mode.&nbsp;Changed&nbsp;times&nbsp;of&nbsp;departure&nbsp;from&nbsp;integers&nbsp;to&nbsp;floats.</tt></dd></dl>

<dl><dt><a name="Simulation-compute_flags"><strong>compute_flags</strong></a>(self)</dt><dd><tt>Computes&nbsp;flags,&nbsp;bottlenecks&nbsp;and&nbsp;overloadedFPs&nbsp;for&nbsp;each&nbsp;AC&nbsp;and&nbsp;in&nbsp;total.<br>
The&nbsp;queue&nbsp;is&nbsp;used&nbsp;to&nbsp;sort&nbsp;the&nbsp;flights,&nbsp;even&nbsp;within&nbsp;a&nbsp;given&nbsp;AC.</tt></dd></dl>

<dl><dt><a name="Simulation-load"><strong>load</strong></a>(self, rep<font color="#909090">=''</font>)</dt><dd><tt>Load&nbsp;a&nbsp;splitted&nbsp;<a href="#Simulation">Simulation</a>&nbsp;from&nbsp;disk.<br>
&nbsp;<br>
Notes<br>
-----<br>
This&nbsp;is&nbsp;a&nbsp;bit&nbsp;dusty&nbsp;maybe.</tt></dd></dl>

<dl><dt><a name="Simulation-make_simu"><strong>make_simu</strong></a>(self, clean<font color="#909090">=False</font>, storymode<font color="#909090">=False</font>)</dt><dd><tt>Do&nbsp;the&nbsp;simulation,&nbsp;clean&nbsp;afterwards&nbsp;the&nbsp;network&nbsp;(useful&nbsp;for&nbsp;iterations).<br>
&nbsp;<br>
Parameters<br>
----------<br>
clean&nbsp;:&nbsp;boolean,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;True,&nbsp;ask&nbsp;the&nbsp;network&nbsp;manager&nbsp;to&nbsp;initialize&nbsp;load&nbsp;on&nbsp;the&nbsp;network&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;beforehand.<br>
storymode&nbsp;:&nbsp;boolean,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;sets&nbsp;verbosity.<br>
&nbsp;<br>
Notes<br>
-----<br>
Changed&nbsp;in&nbsp;2.9.6:&nbsp;added&nbsp;the&nbsp;shuffle_departure.</tt></dd></dl>

<dl><dt><a name="Simulation-make_times"><strong>make_times</strong></a>(self)</dt><dd><tt>Prepares&nbsp;t0sp,&nbsp;the&nbsp;matrix&nbsp;of&nbsp;desired&nbsp;times.&nbsp;Three&nbsp;modes&nbsp;are&nbsp;possible,&nbsp;controlled<br>
by&nbsp;attribute&nbsp;'departure_times'.&nbsp;<br>
&nbsp;<br>
If&nbsp;'zeros',&nbsp;all&nbsp;departure&nbsp;times&nbsp;are&nbsp;set&nbsp;to&nbsp;0,<br>
if&nbsp;'uniform',&nbsp;departure&nbsp;times&nbsp;are&nbsp;drawn&nbsp;uniformly&nbsp;between&nbsp;zero&nbsp;and&nbsp;self.<strong>day</strong>,<br>
if&nbsp;'square_waves',&nbsp;departure&nbsp;times&nbsp;are&nbsp;drawn&nbsp;from&nbsp;a&nbsp;distribution&nbsp;of&nbsp;in&nbsp;wave&nbsp;shaped.&nbsp;The<br>
attribute&nbsp;'width_peak'&nbsp;controls&nbsp;the&nbsp;width&nbsp;of&nbsp;the&nbsp;waves&nbsp;and&nbsp;'Delta_t'&nbsp;controls&nbsp;the&nbsp;time<br>
between&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;a&nbsp;wave&nbsp;and&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;following.&nbsp;Note&nbsp;that&nbsp;for&nbsp;Delta_t=0.,<br>
the&nbsp;distribution&nbsp;is&nbsp;not&nbsp;not&nbsp;completely&nbsp;equivalent&nbsp;to&nbsp;a&nbsp;uniform&nbsp;distribution,&nbsp;since&nbsp;the&nbsp;<br>
flights&nbsp;are&nbsp;evenly&nbsp;spread&nbsp;between&nbsp;waves&nbsp;anyway.<br>
&nbsp;<br>
Raises<br>
------<br>
Exception<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;ACs&nbsp;are&nbsp;requested&nbsp;to&nbsp;have&nbsp;more&nbsp;than&nbsp;one&nbsp;flight&nbsp;and&nbsp;self.<strong>departure_times</strong>='square_waves'.<br>
&nbsp;<br>
Notes<br>
-----<br>
Changed&nbsp;in&nbsp;2.9:&nbsp;added&nbsp;departures&nbsp;from&nbsp;data.<br>
Changed&nbsp;in&nbsp;2.9.3:&nbsp;added&nbsp;noise.<br>
Changed&nbsp;in&nbsp;2.9.5(?):&nbsp;removed&nbsp;departures&nbsp;from&nbsp;data</tt></dd></dl>

<dl><dt><a name="Simulation-mark_best_of_queue"><strong>mark_best_of_queue</strong></a>(self)</dt><dd><tt>Records&nbsp;the&nbsp;cost&nbsp;the&nbsp;best&nbsp;flight&nbsp;plan&nbsp;(first&nbsp;one)&nbsp;for&nbsp;each&nbsp;flight.<br>
&nbsp;<br>
Notes<br>
-----<br>
This&nbsp;method&nbsp;belongs&nbsp;here&nbsp;and&nbsp;not&nbsp;in&nbsp;the&nbsp;Flight&nbsp;object.&nbsp;The&nbsp;reason&nbsp;is&nbsp;that&nbsp;when&nbsp;<br>
there&nbsp;are&nbsp;some&nbsp;reallocations,&nbsp;hence&nbsp;some&nbsp;recomputations&nbsp;of&nbsp;the&nbsp;flight&nbsp;plans&nbsp;by&nbsp;<br>
the&nbsp;flights,&nbsp;the&nbsp;best&nbsp;costs&nbsp;should&nbsp;not&nbsp;be&nbsp;recomputed.</tt></dd></dl>

<dl><dt><a name="Simulation-save"><strong>save</strong></a>(self, rep<font color="#909090">=''</font>, split<font color="#909090">=False</font>, only_flags<font color="#909090">=False</font>)</dt><dd><tt>Save&nbsp;the&nbsp;network&nbsp;in&nbsp;a&nbsp;pickle&nbsp;file,&nbsp;based&nbsp;on&nbsp;the&nbsp;paras.<br>
Can&nbsp;be&nbsp;saved&nbsp;in&nbsp;a&nbsp;single&nbsp;file,&nbsp;or&nbsp;different&nbsp;files&nbsp;to&nbsp;speed&nbsp;up&nbsp;the&nbsp;post-treatment.<br>
&nbsp;<br>
Notes<br>
-----<br>
This&nbsp;is&nbsp;a&nbsp;bit&nbsp;dusty&nbsp;maybe.</tt></dd></dl>

<dl><dt><a name="Simulation-shuffle_departure_times"><strong>shuffle_departure_times</strong></a>(self)</dt><dd><tt>Adds&nbsp;a&nbsp;gaussian&nbsp;noise&nbsp;on&nbsp;the&nbsp;departure&nbsp;times.&nbsp;The&nbsp;standard&nbsp;deviation&nbsp;is<br>
given&nbsp;by&nbsp;attribute&nbsp;'noise'.</tt></dd></dl>

</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-add_first_last_points"><strong>add_first_last_points</strong></a>(trajs, secs<font color="#909090">=False</font>)</dt><dd><tt>Add&nbsp;a&nbsp;first&nbsp;and&nbsp;a&nbsp;last&nbsp;navpoint&nbsp;outside&nbsp;of&nbsp;the&nbsp;area&nbsp;to&nbsp;each&nbsp;trajectory,&nbsp;as&nbsp;required&nbsp;for&nbsp;<br>
the&nbsp;tactical&nbsp;model.&nbsp;The&nbsp;function&nbsp;computes&nbsp;the&nbsp;direction&nbsp;given&nbsp;by&nbsp;the&nbsp;first&nbsp;two&nbsp;points&nbsp;of<br>
each&nbsp;trajectory&nbsp;and&nbsp;create&nbsp;a&nbsp;new&nbsp;point&nbsp;opposed&nbsp;to&nbsp;that&nbsp;direction&nbsp;with&nbsp;distance&nbsp;equal&nbsp;to&nbsp;<br>
the&nbsp;distance&nbsp;between&nbsp;first&nbsp;and&nbsp;second&nbsp;points.&nbsp;Then&nbsp;it&nbsp;does&nbsp;the&nbsp;same&nbsp;thing&nbsp;with&nbsp;the&nbsp;last<br>
point&nbsp;and&nbsp;point&nbsp;before&nbsp;the&nbsp;last&nbsp;one.<br>
&nbsp;<br>
Parameters<br>
----------<br>
trajs&nbsp;:&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;trajectories.&nbsp;A&nbsp;trajectory&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;points,&nbsp;with&nbsp;signature&nbsp;(x,&nbsp;y,&nbsp;z,&nbsp;t)<br>
&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;(x,&nbsp;y,&nbsp;z,&nbsp;t,&nbsp;s).&nbsp;t&nbsp;is&nbsp;time&nbsp;in&nbsp;format&nbsp;[yy,&nbsp;mm,&nbsp;dd,&nbsp;h,&nbsp;m,&nbsp;s]<br>
secs&nbsp;:&nbsp;boolean,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;true,&nbsp;the&nbsp;points&nbsp;will&nbsp;include&nbsp;0&nbsp;for&nbsp;their&nbsp;sector&nbsp;as&nbsp;their&nbsp;fifth&nbsp;component.<br>
&nbsp;<br>
Returns<br>
-------<br>
trajs&nbsp;:&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;trajectories&nbsp;with&nbsp;same&nbsp;signature&nbsp;for&nbsp;points.</tt></dd></dl>
 <dl><dt><a name="-build_path"><strong>build_path</strong></a>(paras, vers<font color="#909090">='2.9'</font>, in_title<font color="#909090">=['Nfp', 'tau', 'par', 'ACtot', 'nA', 'departure_times', 'Nsp_nav', 'old_style_allocation', 'noise']</font>, rep<font color="#909090">='/home/earendil/Documents/ELSA/ABM/results'</font>)</dt><dd><tt>Used&nbsp;to&nbsp;build&nbsp;name&nbsp;+&nbsp;path&nbsp;from&nbsp;a&nbsp;set&nbsp;of&nbsp;paras.&nbsp;<br>
&nbsp;<br>
Parameters<br>
----------<br>
paras&nbsp;:&nbsp;dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;standard&nbsp;paras&nbsp;dict&nbsp;used&nbsp;by&nbsp;the&nbsp;model<br>
vers&nbsp;:&nbsp;string,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Normally&nbsp;formatted&nbsp;like&nbsp;'X.Y'<br>
in_title&nbsp;:&nbsp;list&nbsp;of&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;lisf&nbsp;of&nbsp;keys&nbsp;to&nbsp;include&nbsp;in&nbsp;the&nbsp;title.<br>
rep&nbsp;:&nbsp;string<br>
&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;to&nbsp;(left-)append&nbsp;to&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file.&nbsp;Use&nbsp;''&nbsp;to&nbsp;have&nbsp;only&nbsp;the&nbsp;name.<br>
&nbsp;<br>
Returns<br>
-------<br>
name&nbsp;:&nbsp;string<br>
&nbsp;&nbsp;&nbsp;&nbsp;full&nbsp;path&nbsp;if&nbsp;rep&nbsp;is&nbsp;different&nbsp;from&nbsp;'',&nbsp;only&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;otherwise.<br>
&nbsp;<br>
Notes<br>
-----<br>
Changed&nbsp;2.2:&nbsp;is&nbsp;only&nbsp;for&nbsp;single&nbsp;simulations.<br>
Changed&nbsp;2.4:&nbsp;takes&nbsp;different&nbsp;departure&nbsp;times&nbsp;patterns.&nbsp;Takes&nbsp;names.<br>
Changed&nbsp;in&nbsp;2.5:&nbsp;added&nbsp;N_shocks&nbsp;and&nbsp;improved&nbsp;the&nbsp;rest.</tt></dd></dl>
 <dl><dt><a name="-ceil"><strong>ceil</strong></a>(...)</dt><dd><tt><a href="#-ceil">ceil</a>(x)<br>
&nbsp;<br>
Return&nbsp;the&nbsp;ceiling&nbsp;of&nbsp;x&nbsp;as&nbsp;a&nbsp;float.<br>
This&nbsp;is&nbsp;the&nbsp;smallest&nbsp;integral&nbsp;value&nbsp;&gt;=&nbsp;x.</tt></dd></dl>
 <dl><dt><a name="-check_object"><strong>check_object</strong></a>(G)</dt><dd><tt>Use&nbsp;to&nbsp;check&nbsp;if&nbsp;you&nbsp;have&nbsp;an&nbsp;old&nbsp;object.&nbsp;Used&nbsp;for&nbsp;legacy.</tt></dd></dl>
 <dl><dt><a name="-do_standard"><strong>do_standard</strong></a>((paras, G))</dt><dd><tt>Make&nbsp;the&nbsp;simulation&nbsp;and&nbsp;extract&nbsp;aggregate&nbsp;values.&nbsp;Used&nbsp;for&nbsp;automatic&nbsp;entry,&nbsp;<br>
in&nbsp;particular&nbsp;by&nbsp;iter_sim.<br>
&nbsp;<br>
Parameters<br>
----------<br>
paras&nbsp;:&nbsp;dictionary<br>
&nbsp;&nbsp;&nbsp;&nbsp;containing&nbsp;the&nbsp;parameters&nbsp;for&nbsp;the&nbsp;simulations.<br>
G&nbsp;:&nbsp;hybrid&nbsp;network<br>
&nbsp;<br>
Returns<br>
-------<br>
results&nbsp;:&nbsp;dictionary<br>
&nbsp;&nbsp;&nbsp;&nbsp;gathers&nbsp;results&nbsp;from&nbsp;extract_aggregate_values_on_queue&nbsp;and&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;extract_aggregate_values_on_network.<br>
&nbsp;<br>
Notes<br>
-----<br>
New&nbsp;in&nbsp;2.9.2:&nbsp;extracted&nbsp;from&nbsp;average_sim<br>
Changed&nbsp;in&nbsp;2.9.4:&nbsp;taken&nbsp;from&nbsp;iter_simO<br>
Changed&nbsp;in&nbsp;2.9.6:&nbsp;changed&nbsp;signature,&nbsp;removed&nbsp;integer&nbsp;i.</tt></dd></dl>
 <dl><dt><a name="-extract_aggregate_values_on_network"><strong>extract_aggregate_values_on_network</strong></a>(G)</dt><dd><tt>Extract&nbsp;aggregated&nbsp;values&nbsp;concerning&nbsp;the&nbsp;network&nbsp;concerning&nbsp;the&nbsp;traffic.&nbsp;Right&nbsp;<br>
now,&nbsp;the&nbsp;load&nbsp;(see&nbsp;the&nbsp;definition&nbsp;in&nbsp;simAirSpaceO.Network_Manager&nbsp;object)&nbsp;and&nbsp;the&nbsp;<br>
load/capacity&nbsp;are&nbsp;computed.<br>
&nbsp;<br>
TODO:&nbsp;Only&nbsp;works&nbsp;with&nbsp;the&nbsp;old,&nbsp;instantaneous&nbsp;definition&nbsp;of&nbsp;the&nbsp;load.&nbsp;Needs&nbsp;an&nbsp;update.<br>
&nbsp;<br>
Parameters<br>
----------<br>
G&nbsp;:&nbsp;hybrid&nbsp;network<br>
&nbsp;<br>
Returns<br>
-------<br>
dict&nbsp;:&nbsp;dictionary<br>
&nbsp;&nbsp;&nbsp;&nbsp;values&nbsp;are&nbsp;averages&nbsp;over&nbsp;all&nbsp;nodes&nbsp;and&nbsp;all&nbsp;times&nbsp;of&nbsp;the&nbsp;loads&nbsp;of&nbsp;the&nbsp;network.</tt></dd></dl>
 <dl><dt><a name="-extract_aggregate_values_on_queue"><strong>extract_aggregate_values_on_queue</strong></a>(queue, types_air_companies, mets<font color="#909090">=['satisfaction', 'regulated_F', 'regulated_FPs']</font>)</dt><dd><tt>Computes&nbsp;some&nbsp;aggregated&nbsp;metrics&nbsp;on&nbsp;queue.&nbsp;The&nbsp;results&nbsp;are&nbsp;gathered&nbsp;by&nbsp;metrics&nbsp;and&nbsp;types&nbsp;<br>
of&nbsp;air&nbsp;companies.&nbsp;Only&nbsp;the&nbsp;average&nbsp;metrics&nbsp;are&nbsp;computed.<br>
&nbsp;<br>
Parameters<br>
----------<br>
queue&nbsp;:&nbsp;list&nbsp;of&nbsp;Flight&nbsp;objects<br>
types_air_companies&nbsp;:&nbsp;list&nbsp;of&nbsp;tuples&nbsp;(float,&nbsp;float,&nbsp;float)<br>
&nbsp;&nbsp;&nbsp;&nbsp;Reprenting&nbsp;the&nbsp;different&nbsp;types&nbsp;of&nbsp;companies&nbsp;in&nbsp;the&nbsp;simulations.&nbsp;The&nbsp;tuples&nbsp;are&nbsp;the&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;of&nbsp;the&nbsp;cost&nbsp;function&nbsp;of&nbsp;each&nbsp;company.<br>
mets&nbsp;:&nbsp;list&nbsp;of&nbsp;string,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;attributes&nbsp;to&nbsp;extract&nbsp;from&nbsp;the&nbsp;Flight&nbsp;object&nbsp;in&nbsp;queue.<br>
&nbsp;<br>
Returns:<br>
--------<br>
results&nbsp;:&nbsp;dict&nbsp;of&nbsp;dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;first&nbsp;levels&nbsp;of&nbsp;keys&nbsp;are&nbsp;the&nbsp;metrics,&nbsp;second&nbsp;levels&nbsp;are&nbsp;the&nbsp;types&nbsp;of&nbsp;air&nbsp;companies.&nbsp;<br>
&nbsp;<br>
Notes<br>
-----<br>
If&nbsp;some&nbsp;flights&nbsp;have&nbsp;a&nbsp;type&nbsp;(i.e.&nbsp;a&nbsp;tuple&nbsp;for&nbsp;cost&nbsp;function)&nbsp;which&nbsp;is&nbsp;not&nbsp;in&nbsp;types_air_companies,<br>
they&nbsp;are&nbsp;ignored.</tt></dd></dl>
 <dl><dt><a name="-generate_traffic"><strong>generate_traffic</strong></a>(G, paras_file<font color="#909090">=None</font>, save_file<font color="#909090">=None</font>, simple_setup<font color="#909090">=True</font>, starting_date<font color="#909090">=[2010, 5, 6, 0, 0, 0]</font>, coordinates<font color="#909090">=True</font>, generate_altitudes<font color="#909090">=True</font>, put_sectors<font color="#909090">=False</font>, save_file_capacities<font color="#909090">=None</font>, record_stats_file<font color="#909090">=None</font>, remove_flights_after_midnight<font color="#909090">=False</font>, rectificate<font color="#909090">=None</font>, storymode<font color="#909090">=False</font>, **paras_control)</dt><dd><tt>High&nbsp;level&nbsp;function&nbsp;to&nbsp;create&nbsp;traffic&nbsp;on&nbsp;a&nbsp;given&nbsp;network&nbsp;with&nbsp;given&nbsp;parameters.&nbsp;<br>
It&nbsp;is&nbsp;not&nbsp;really&nbsp;intented&nbsp;to&nbsp;use&nbsp;as&nbsp;a&nbsp;simulation&nbsp;by&nbsp;itself,&nbsp;but&nbsp;only&nbsp;to&nbsp;generate&nbsp;<br>
some&nbsp;synthetic&nbsp;traffic,&nbsp;mainly&nbsp;for&nbsp;the&nbsp;tactical&nbsp;ABM.<br>
Returns&nbsp;a&nbsp;set&nbsp;of&nbsp;M1&nbsp;trajectories.<br>
If&nbsp;simple_setup&nbsp;is&nbsp;True,&nbsp;the&nbsp;function&nbsp;uses&nbsp;some&nbsp;default&nbsp;parameters&nbsp;suitable&nbsp;for&nbsp;<br>
quick&nbsp;generation&nbsp;of&nbsp;traffic.<br>
&nbsp;<br>
Parameters<br>
----------<br>
G&nbsp;:&nbsp;hybrid&nbsp;network<br>
&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;which&nbsp;to&nbsp;generate&nbsp;the&nbsp;traffic.<br>
paras_file&nbsp;:&nbsp;string,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;for&nbsp;reading&nbsp;the&nbsp;parameters&nbsp;for&nbsp;the&nbsp;simulations.&nbsp;If&nbsp;None,&nbsp;reads&nbsp;paras.py.<br>
save_file&nbsp;:&nbsp;string<br>
&nbsp;&nbsp;&nbsp;&nbsp;file&nbsp;for&nbsp;saving&nbsp;trajectories&nbsp;with&nbsp;the&nbsp;abm_tactical&nbsp;format.<br>
simple_setup&nbsp;:&nbsp;boolean<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;False,&nbsp;all&nbsp;parameters&nbsp;must&nbsp;be&nbsp;informed.&nbsp;Otherwise&nbsp;some&nbsp;default&nbsp;parameters<br>
&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;used.<br>
starting_date&nbsp;:&nbsp;list&nbsp;or&nbsp;tuple&nbsp;of&nbsp;int,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;gives&nbsp;the&nbsp;starting&nbsp;date&nbsp;for&nbsp;the&nbsp;simulations.&nbsp;It&nbsp;is&nbsp;used&nbsp;to&nbsp;have&nbsp;the&nbsp;right&nbsp;dates&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;output.<br>
coordinates&nbsp;:&nbsp;boolean,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;True,&nbsp;return&nbsp;list&nbsp;of&nbsp;coordinates&nbsp;instead&nbsp;list&nbsp;of&nbsp;labels&nbsp;of&nbsp;navpoints.<br>
generate_altitudes&nbsp;:&nbsp;boolean,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;True,&nbsp;generate&nbsp;synthetic&nbsp;altitudes&nbsp;in&nbsp;output.&nbsp;The&nbsp;altitudes&nbsp;are&nbsp;bootstrapped&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;the&nbsp;file_traffic&nbsp;file&nbsp;informed&nbsp;in&nbsp;the&nbsp;paras&nbsp;file.<br>
put_sectors&nbsp;:&nbsp;boolean,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;True,&nbsp;the&nbsp;trajectories&nbsp;in&nbsp;ouput&nbsp;have&nbsp;a&nbsp;fifth&nbsp;element&nbsp;which&nbsp;is&nbsp;the&nbsp;sector.<br>
save_file_capacities&nbsp;:&nbsp;string,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;not&nbsp;None,&nbsp;the&nbsp;capacities&nbsp;of&nbsp;the&nbsp;network&nbsp;are&nbsp;written&nbsp;in&nbsp;a&nbsp;txt&nbsp;file&nbsp;in&nbsp;a&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;format&nbsp;readable&nbsp;by&nbsp;the&nbsp;tactical&nbsp;ABM.<br>
record_stats_file&nbsp;:&nbsp;string,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;informed,&nbsp;the&nbsp;visual&nbsp;output&nbsp;of&nbsp;the&nbsp;funtion&nbsp;is&nbsp;written&nbsp;on&nbsp;the&nbsp;file.<br>
remove_flights_after_midnight&nbsp;:&nbsp;boolean,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;True,&nbsp;remove&nbsp;from&nbsp;the&nbsp;trajectories&nbsp;all&nbsp;the&nbsp;ones&nbsp;which&nbsp;land&nbsp;the&nbsp;day&nbsp;after&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;starting_date.<br>
rectificate&nbsp;:&nbsp;dictionary,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;informed,&nbsp;the&nbsp;trajctories&nbsp;will&nbsp;be&nbsp;rectified&nbsp;using&nbsp;the&nbsp;function&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;rectificate_trajectories_network_with_time&nbsp;with&nbsp;parameters&nbsp;given&nbsp;by&nbsp;the&nbsp;dictionary<br>
storymode&nbsp;:&nbsp;boolean,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;set&nbsp;the&nbsp;verbosity&nbsp;of&nbsp;the&nbsp;simulation&nbsp;itself.<br>
paras_control&nbsp;:&nbsp;additional&nbsp;parameters<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;values&nbsp;which&nbsp;are&nbsp;externally&nbsp;controlled.&nbsp;Typically,<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;number&nbsp;of&nbsp;flights.<br>
&nbsp;<br>
Returns<br>
-------<br>
trajectories_coords&nbsp;:&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;trajectories.&nbsp;Each&nbsp;point&nbsp;in&nbsp;the&nbsp;trajectories&nbsp;has&nbsp;the&nbsp;format&nbsp;(x,&nbsp;y,&nbsp;z,&nbsp;t),&nbsp;(x,&nbsp;y,&nbsp;z,&nbsp;t,&nbsp;s)<br>
&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;are&nbsp;directly&nbsp;(label,&nbsp;z,&nbsp;t).<br>
stats&nbsp;:&nbsp;dictionary<br>
&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;some&nbsp;results&nbsp;about&nbsp;the&nbsp;simulation,&nbsp;like&nbsp;the&nbsp;number&nbsp;of&nbsp;flights&nbsp;rejected,&nbsp;etc.<br>
&nbsp;<br>
Notes<br>
-----<br>
New&nbsp;in&nbsp;2.9.4.<br>
Changed&nbsp;in&nbsp;2.9.5:&nbsp;Added&nbsp;synthetic&nbsp;altitudes&nbsp;generation.</tt></dd></dl>
 <dl><dt><a name="-plot_times_departure"><strong>plot_times_departure</strong></a>(queue, rep<font color="#909090">='.'</font>)</dt><dd><tt>Small&nbsp;snippet&nbsp;to&nbsp;plot&nbsp;the&nbsp;depatures&nbsp;time&nbsp;pattern&nbsp;of&nbsp;flights&nbsp;in&nbsp;a&nbsp;queue.</tt></dd></dl>
 <dl><dt><a name="-post_process_queue"><strong>post_process_queue</strong></a>(queue)</dt><dd><tt>Used&nbsp;to&nbsp;post-process&nbsp;results.&nbsp;Conpute&nbsp;the&nbsp;satisfaction&nbsp;of&nbsp;each&nbsp;flight,&nbsp;the&nbsp;regulated&nbsp;flight&nbsp;plans,<br>
the&nbsp;regulated&nbsp;flights.<br>
&nbsp;<br>
Parameters<br>
----------<br>
queue&nbsp;:&nbsp;list&nbsp;of&nbsp;FlightPlan&nbsp;objects<br>
&nbsp;<br>
Returns<br>
-------<br>
queue&nbsp;:&nbsp;list&nbsp;of&nbsp;FlightPlan&nbsp;objects<br>
&nbsp;&nbsp;&nbsp;&nbsp;With&nbsp;additional&nbsp;flags&nbsp;computed.<br>
&nbsp;<br>
Notes<br>
-----<br>
Every&nbsp;processes&nbsp;between&nbsp;the&nbsp;simulation&nbsp;and&nbsp;the&nbsp;plots&nbsp;should&nbsp;be&nbsp;here.<br>
Changed&nbsp;in&nbsp;2.4:&nbsp;add&nbsp;satisfaction,&nbsp;regulated&nbsp;flight&nbsp;&amp;&nbsp;regulated&nbsp;flight&nbsp;plans.&nbsp;On&nbsp;level&nbsp;of&nbsp;iteration&nbsp;added&nbsp;(on&nbsp;par).<br>
Changed&nbsp;in&nbsp;2.5:&nbsp;independent&nbsp;function.<br>
Changed&nbsp;in&nbsp;2.7:&nbsp;best&nbsp;cost&nbsp;is&nbsp;not&nbsp;the&nbsp;first&nbsp;FP's&nbsp;one.<br>
Changed&nbsp;in&nbsp;2.9.3:&nbsp;added&nbsp;regulated_1FP</tt></dd></dl>
 <dl><dt><a name="-write_down_capacities"><strong>write_down_capacities</strong></a>(G, save_file<font color="#909090">=None</font>)</dt><dd><tt>Write&nbsp;down&nbsp;the&nbsp;capacitie&nbsp;of&nbsp;all&nbsp;sector&nbsp;of&nbsp;network&nbsp;in&nbsp;a&nbsp;txt&nbsp;file.</tt></dd></dl>
</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>main_version</strong> = '2.9'<br>
<strong>print_function</strong> = _Feature((2, 6, 0, 'alpha', 2), (3, 0, 0, 'alpha', 0), 65536)<br>
<strong>result_dir</strong> = '/home/earendil/Documents/ELSA/ABM/results'<br>
<strong>version</strong> = '2.9.6'</td></tr></table>
</body></html>