
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module simulationO</title>
<meta charset="utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>simulationO</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/home/earendil/Documents/ELSA/ABM/ABM_FINAL/abm_strategic/simulationO.py">/home/earendil/Documents/ELSA/ABM/ABM_FINAL/abm_strategic/simulationO.py</a></font></td></tr></table>
    <p><tt>Created&nbsp;on&nbsp;Mon&nbsp;Dec&nbsp;17&nbsp;14:38:09&nbsp;2012<br>
&nbsp;<br>
@author:&nbsp;earendil<br>
&nbsp;<br>
===========================================================================<br>
This&nbsp;is&nbsp;the&nbsp;main&nbsp;interface&nbsp;to&nbsp;the&nbsp;model.&nbsp;The&nbsp;main&nbsp;functions&nbsp;are&nbsp;<br>
&nbsp;-&nbsp;do_standard,&nbsp;which&nbsp;makes&nbsp;a&nbsp;single&nbsp;iteration&nbsp;of&nbsp;the&nbsp;model,&nbsp;<br>
&nbsp;-&nbsp;generate_traffic,&nbsp;used&nbsp;by&nbsp;tactical&nbsp;model<br>
===========================================================================</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="copy.html">copy</a><br>
<a href="numpy.html">numpy</a><br>
</td><td width="25%" valign=top><a href="networkx.html">networkx</a><br>
<a href="os.html">os</a><br>
</td><td width="25%" valign=top><a href="pickle.html">pickle</a><br>
<a href="matplotlib.pyplot.html">matplotlib.pyplot</a><br>
</td><td width="25%" valign=top><a href="sys.html">sys</a><br>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="simulationO.html#Simulation">Simulation</a>
</font></dt></dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="Simulation">class <strong>Simulation</strong></a></font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>Class&nbsp;<a href="#Simulation">Simulation</a>.&nbsp;<br>
=============<br>
Main&nbsp;object&nbsp;for&nbsp;the&nbsp;simulation.&nbsp;Initialize&nbsp;loads,&nbsp;prepares&nbsp;air&nbsp;companies,&nbsp;<br>
calls&nbsp;network&nbsp;manager,&nbsp;keeps&nbsp;the&nbsp;M1&nbsp;queue&nbsp;in&nbsp;memory,&nbsp;calls&nbsp;for&nbsp;possible&nbsp;<br>
shocks.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="Simulation-__init__"><strong>__init__</strong></a>(self, paras, G<font color="#909090">=None</font>, verbose<font color="#909090">=False</font>, make_dir<font color="#909090">=False</font>)</dt><dd><tt>Initialize&nbsp;the&nbsp;simulation,&nbsp;build&nbsp;the&nbsp;network&nbsp;if&nbsp;none&nbsp;is&nbsp;given&nbsp;in&nbsp;argument,&nbsp;set&nbsp;the&nbsp;verbosity<br>
Change&nbsp;in&nbsp;2.9.3:&nbsp;self.<strong>make_times</strong>&nbsp;is&nbsp;computed&nbsp;at&nbsp;each&nbsp;simulations.<br>
Changed&nbsp;in&nbsp;2.9.3:&nbsp;update&nbsp;shortest&nbsp;paths&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;change&nbsp;of&nbsp;Nsp_nav.</tt></dd></dl>

<dl><dt><a name="Simulation-build_ACs"><strong>build_ACs</strong></a>(self)</dt><dd><tt>Build&nbsp;all&nbsp;the&nbsp;Air&nbsp;Companies&nbsp;based&nbsp;on&nbsp;the&nbsp;number&nbsp;of&nbsp;Air&nbsp;Companies&nbsp;given&nbsp;in&nbsp;paras.<br>
If&nbsp;n_AC&nbsp;is&nbsp;an&nbsp;integer&nbsp;and&nbsp;if&nbsp;several&nbsp;sets&nbsp;of&nbsp;parameters&nbsp;are&nbsp;given&nbsp;for&nbsp;the&nbsp;utility&nbsp;<br>
function,&nbsp;make&nbsp;the&nbsp;same&nbsp;number&nbsp;of&nbsp;AC&nbsp;sor&nbsp;each&nbsp;set.&nbsp;If&nbsp;n_AC&nbsp;is&nbsp;an&nbsp;array&nbsp;of&nbsp;integers&nbsp;<br>
of&nbsp;the&nbsp;same&nbsp;size&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;set&nbsp;of&nbsp;parameters,&nbsp;populates&nbsp;the&nbsp;different<br>
types&nbsp;with&nbsp;this&nbsp;array.<br>
Exs:<br>
&nbsp;&nbsp;&nbsp;&nbsp;self.<strong>n_AC</strong>=30,&nbsp;self.<strong>pars</strong>=[[1,0,0]]&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;gives&nbsp;30&nbsp;ACs&nbsp;with&nbsp;parameters&nbsp;[1,0,0].<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;self.<strong>n_AC</strong>=30,&nbsp;self.<strong>pars</strong>=[[1,0,0],&nbsp;[0,0,1]]&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;gives&nbsp;15&nbsp;ACs&nbsp;with&nbsp;parameters&nbsp;[1,0,0]&nbsp;and&nbsp;15&nbsp;ACs&nbsp;with&nbsp;parameters&nbsp;[0,0,1].<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;self.<strong>n_AC</strong>=[10,20],&nbsp;self.<strong>pars</strong>=[[1,0,0],&nbsp;[0,0,1]]&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;gives&nbsp;10&nbsp;ACs&nbsp;with&nbsp;parameters&nbsp;[1,0,0]&nbsp;and&nbsp;20&nbsp;ACs&nbsp;with&nbsp;parameters&nbsp;[0,0,1].<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Builds&nbsp;all&nbsp;flight&nbsp;plans&nbsp;for&nbsp;all&nbsp;ACs.<br>
&nbsp;<br>
Changed&nbsp;in&nbsp;2.9:&nbsp;pairs&nbsp;given&nbsp;to&nbsp;ACs&nbsp;are&nbsp;navpoints,&nbsp;not&nbsp;sectors</tt></dd></dl>

<dl><dt><a name="Simulation-build_ACs_from_flows"><strong>build_ACs_from_flows</strong></a>(self)</dt><dd><tt>New&nbsp;in&nbsp;2.9.2:&nbsp;the&nbsp;list&nbsp;of&nbsp;ACs&nbsp;is&nbsp;built&nbsp;from&nbsp;the&nbsp;flows&nbsp;(given&nbsp;by&nbsp;times).&nbsp;<br>
Changed&nbsp;in&nbsp;2.9.5:&nbsp;record&nbsp;the&nbsp;day&nbsp;of&nbsp;simulation.<br>
Changed&nbsp;in&nbsp;2.9.6:&nbsp;added&nbsp;bootstrap_mode</tt></dd></dl>

<dl><dt><a name="Simulation-compute_flags"><strong>compute_flags</strong></a>(self)</dt><dd><tt>Computes&nbsp;flags,&nbsp;bottlenecks&nbsp;and&nbsp;overloadedFPs&nbsp;for&nbsp;each&nbsp;AC&nbsp;and&nbsp;in&nbsp;total.<br>
The&nbsp;queue&nbsp;is&nbsp;used&nbsp;to&nbsp;sort&nbsp;the&nbsp;flights,&nbsp;even&nbsp;within&nbsp;a&nbsp;given&nbsp;AC.</tt></dd></dl>

<dl><dt><a name="Simulation-load"><strong>load</strong></a>(self, rep<font color="#909090">=''</font>)</dt><dd><tt>Load&nbsp;a&nbsp;split&nbsp;<a href="#Simulation">Simulation</a>&nbsp;from&nbsp;disk.</tt></dd></dl>

<dl><dt><a name="Simulation-make_simu"><strong>make_simu</strong></a>(self, clean<font color="#909090">=False</font>, storymode<font color="#909090">=False</font>)</dt><dd><tt>Do&nbsp;the&nbsp;simulation,&nbsp;clean&nbsp;afterwards&nbsp;the&nbsp;network&nbsp;(useful&nbsp;for&nbsp;iterations).<br>
Changed&nbsp;in&nbsp;2.9.6:&nbsp;added&nbsp;the&nbsp;shuffle_departure.</tt></dd></dl>

<dl><dt><a name="Simulation-make_times"><strong>make_times</strong></a>(self, times_data<font color="#909090">=[]</font>)</dt><dd><tt>Prepare&nbsp;t0sp,&nbsp;the&nbsp;matrix&nbsp;of&nbsp;desired&nbsp;times.<br>
New&nbsp;in&nbsp;2.9:&nbsp;added&nbsp;departures&nbsp;from&nbsp;data.<br>
New&nbsp;in&nbsp;2.9.3:&nbsp;added&nbsp;noise.</tt></dd></dl>

<dl><dt><a name="Simulation-mark_best_of_queue"><strong>mark_best_of_queue</strong></a>(self)</dt></dl>

<dl><dt><a name="Simulation-save"><strong>save</strong></a>(self, rep<font color="#909090">=''</font>, split<font color="#909090">=False</font>, only_flags<font color="#909090">=False</font>)</dt><dd><tt>Save&nbsp;the&nbsp;network&nbsp;in&nbsp;a&nbsp;pickle&nbsp;file,&nbsp;based&nbsp;on&nbsp;the&nbsp;paras.<br>
Can&nbsp;be&nbsp;saved&nbsp;in&nbsp;a&nbsp;single&nbsp;file,&nbsp;or&nbsp;different&nbsp;files&nbsp;to&nbsp;speed&nbsp;up&nbsp;the&nbsp;post-treatment.</tt></dd></dl>

<dl><dt><a name="Simulation-shuffle_departure_times"><strong>shuffle_departure_times</strong></a>(self)</dt></dl>

</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-add_first_last_points"><strong>add_first_last_points</strong></a>(trajs, secs<font color="#909090">=False</font>)</dt><dd><tt>Add&nbsp;a&nbsp;first&nbsp;and&nbsp;a&nbsp;last&nbsp;navpoint&nbsp;outside&nbsp;of&nbsp;the&nbsp;area&nbsp;to&nbsp;each&nbsp;trajectory.<br>
This&nbsp;is&nbsp;a&nbsp;requirement&nbsp;for&nbsp;the&nbsp;tactical&nbsp;abm.</tt></dd></dl>
 <dl><dt><a name="-build_path"><strong>build_path</strong></a>(paras, vers<font color="#909090">='2.9'</font>, in_title<font color="#909090">=['Nfp', 'tau', 'par', 'ACtot', 'nA', 'departure_times', 'Nsp_nav', 'old_style_allocation', 'noise']</font>, only_name<font color="#909090">=False</font>)</dt><dd><tt>Used&nbsp;to&nbsp;build&nbsp;a&nbsp;path&nbsp;from&nbsp;a&nbsp;set&nbsp;of&nbsp;paras.&nbsp;<br>
Changed&nbsp;2.2:&nbsp;is&nbsp;only&nbsp;for&nbsp;single&nbsp;simulations.<br>
Changed&nbsp;2.4:&nbsp;takes&nbsp;different&nbsp;departure&nbsp;times&nbsp;patterns.&nbsp;Takes&nbsp;names.<br>
Changed&nbsp;in&nbsp;2.5:&nbsp;added&nbsp;N_shocks&nbsp;and&nbsp;improved&nbsp;the&nbsp;rest.</tt></dd></dl>
 <dl><dt><a name="-ceil"><strong>ceil</strong></a>(...)</dt><dd><tt><a href="#-ceil">ceil</a>(x)<br>
&nbsp;<br>
Return&nbsp;the&nbsp;ceiling&nbsp;of&nbsp;x&nbsp;as&nbsp;a&nbsp;float.<br>
This&nbsp;is&nbsp;the&nbsp;smallest&nbsp;integral&nbsp;value&nbsp;&gt;=&nbsp;x.</tt></dd></dl>
 <dl><dt><a name="-check_object"><strong>check_object</strong></a>(G)</dt><dd><tt>Use&nbsp;to&nbsp;check&nbsp;if&nbsp;you&nbsp;have&nbsp;an&nbsp;old&nbsp;object.&nbsp;Used&nbsp;for&nbsp;legacy.</tt></dd></dl>
 <dl><dt><a name="-do_standard"><strong>do_standard</strong></a>((paras, G, i))</dt><dd><tt>Make&nbsp;the&nbsp;simulation&nbsp;and&nbsp;extract&nbsp;aggregate&nbsp;values.<br>
This&nbsp;one&nbsp;is&nbsp;used&nbsp;in&nbsp;particular&nbsp;by&nbsp;iter_sim<br>
New&nbsp;in&nbsp;2.9.2:&nbsp;extracted&nbsp;from&nbsp;average_sim<br>
Changed&nbsp;in&nbsp;2.9.4:&nbsp;taken&nbsp;from&nbsp;iter_simO</tt></dd></dl>
 <dl><dt><a name="-extract_aggregate_values_on_network"><strong>extract_aggregate_values_on_network</strong></a>(G)</dt></dl>
 <dl><dt><a name="-extract_aggregate_values_on_queue"><strong>extract_aggregate_values_on_queue</strong></a>(queue, types_air_companies, mets<font color="#909090">=['satisfaction', 'regulated_F', 'regulated_FPs']</font>)</dt></dl>
 <dl><dt><a name="-generate_traffic"><strong>generate_traffic</strong></a>(G, paras_file<font color="#909090">=None</font>, save_file<font color="#909090">=None</font>, simple_setup<font color="#909090">=True</font>, starting_date<font color="#909090">=[2010, 5, 6, 0, 0, 0]</font>, coordinates<font color="#909090">=True</font>, generate_altitudes<font color="#909090">=True</font>, put_sectors<font color="#909090">=False</font>, save_file_capacities<font color="#909090">=None</font>, record_stats_file<font color="#909090">=None</font>, remove_flights_after_midnight<font color="#909090">=False</font>, rectificate<font color="#909090">=None</font>, storymode<font color="#909090">=False</font>, **paras_control)</dt><dd><tt>High&nbsp;level&nbsp;function&nbsp;to&nbsp;create&nbsp;traffic&nbsp;on&nbsp;a&nbsp;given&nbsp;network&nbsp;with&nbsp;given&nbsp;parameters.&nbsp;<br>
It&nbsp;is&nbsp;not&nbsp;really&nbsp;intented&nbsp;to&nbsp;use&nbsp;as&nbsp;a&nbsp;simulation&nbsp;by&nbsp;itself,&nbsp;but&nbsp;only&nbsp;to&nbsp;generate&nbsp;<br>
some&nbsp;synthetic&nbsp;traffic,&nbsp;mainly&nbsp;for&nbsp;the&nbsp;tactical&nbsp;ABM.<br>
Returns&nbsp;a&nbsp;set&nbsp;of&nbsp;M1&nbsp;trajectories.<br>
If&nbsp;simple_setup&nbsp;is&nbsp;True,&nbsp;the&nbsp;function&nbsp;uses&nbsp;some&nbsp;default&nbsp;parameters&nbsp;suitable&nbsp;for&nbsp;<br>
quick&nbsp;generation&nbsp;of&nbsp;traffic.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;paras_control:&nbsp;dictionary&nbsp;of&nbsp;values&nbsp;which&nbsp;are&nbsp;externally&nbsp;controlled.&nbsp;Typically,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;number&nbsp;of&nbsp;flights.<br>
&nbsp;&nbsp;&nbsp;&nbsp;save_file:&nbsp;file&nbsp;for&nbsp;saving&nbsp;trajectories&nbsp;with&nbsp;the&nbsp;abm_tactical&nbsp;format.<br>
&nbsp;&nbsp;&nbsp;&nbsp;coordinates:&nbsp;return&nbsp;list&nbsp;of&nbsp;coordinates&nbsp;instead&nbsp;list&nbsp;of&nbsp;names&nbsp;of&nbsp;navpoints.<br>
&nbsp;&nbsp;&nbsp;&nbsp;simple_setup:&nbsp;if&nbsp;False,&nbsp;all&nbsp;parameters&nbsp;must&nbsp;be&nbsp;informed.&nbsp;Otherwise&nbsp;some&nbsp;default<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;are&nbsp;used.<br>
&nbsp;&nbsp;&nbsp;&nbsp;generate_traffic:&nbsp;if&nbsp;True&nbsp;and&nbsp;paras['file_traffic']&nbsp;is&nbsp;informed,&nbsp;generates&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;synthetic&nbsp;altitudes.&nbsp;<br>
&nbsp;<br>
New&nbsp;in&nbsp;2.9.4.<br>
Changed&nbsp;in&nbsp;2.9.5:&nbsp;Added&nbsp;synthetic&nbsp;altitudes&nbsp;generation.</tt></dd></dl>
 <dl><dt><a name="-plot_times_departure"><strong>plot_times_departure</strong></a>(queue, rep<font color="#909090">='.'</font>)</dt></dl>
 <dl><dt><a name="-post_process_queue"><strong>post_process_queue</strong></a>(queue)</dt><dd><tt>Used&nbsp;to&nbsp;post-process&nbsp;results.&nbsp;Every&nbsp;processes&nbsp;between&nbsp;the&nbsp;simulation&nbsp;and&nbsp;<br>
the&nbsp;plots&nbsp;should&nbsp;be&nbsp;here.<br>
Changed&nbsp;in&nbsp;2.4:&nbsp;add&nbsp;satisfaction,&nbsp;regulated&nbsp;flight&nbsp;&amp;&nbsp;regulated&nbsp;flight&nbsp;plans.&nbsp;On&nbsp;level&nbsp;of&nbsp;iteration&nbsp;added&nbsp;(on&nbsp;par).<br>
Changed&nbsp;in&nbsp;2.5:&nbsp;independent&nbsp;function.<br>
Changed&nbsp;in&nbsp;2.7:&nbsp;best&nbsp;cost&nbsp;is&nbsp;not&nbsp;the&nbsp;first&nbsp;FP's&nbsp;one.<br>
Changed&nbsp;in&nbsp;2.9.3:&nbsp;added&nbsp;regulated_1FP</tt></dd></dl>
 <dl><dt><a name="-write_down_capacities"><strong>write_down_capacities</strong></a>(G, save_file<font color="#909090">=None</font>)</dt></dl>
</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>main_version</strong> = '2.9'<br>
<strong>print_function</strong> = _Feature((2, 6, 0, 'alpha', 2), (3, 0, 0, 'alpha', 0), 65536)<br>
<strong>version</strong> = '2.9.6'</td></tr></table>
</body></html>